<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
        2021全真模拟 - Arahc&#39;s blog
      </title>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    
    <meta name="theme-color" content="#000000" />
    
    <meta http-equiv="window-target" content="_top" />
    
    
    <meta name="description" content="总结 考试策略 T1 $n^2$ 暴力显然，因为好写而且没有想到正解所以直接跳过。T2 因为题意一直在强调几个东西，把这些当做状态就切掉了。仔细阅读 T3 之后没有好想法，所以回到 T1，想到一种正解。写了三分查找，过了大样例后时间剩余不多，紧急回头写 T3 暴力与骗分。
结果反思 T1：期望得分 $100$，实际得分 $35$，三分查找挂掉了。代码实现能力需加强。
T2：期望得分 $100$，实际得分 $100$。
T3：期望得分 $5$，实际得分 $0$。没骗到分，题目不会属于个人能力问题。
题解 T1：斯  给定两个长度为 $n$ 的实数序列 $a,b$。对于任意一个序列的任意一个数，你都可以用 $1$ 的代价标记这个数。记 $a$ 序列标记的数之和为 $s_a$，$b$ 序列标记的数之和为 $s_b$。你的到的收益为 $\min(sa,sb)$ 减去花费的代价。求收益最大值。$n\leqslant 10^5,1\leqslant a_i,b_i\leqslant 10$。
 考虑到选择一个数的代价都是 $1$。那么对于属于同一序列的数，显然优先选择数值更大的。本题的重点就是显然不能全部选择，因为代价随选择个数线性增长，可能选到后面就有些入不敷出。因为一定优先选择最大的，所以不妨先给 $a,b$ 按大到小排个序，此时一个符合贪心策略的选择方案就是在 $a$ 数组选前若干个，$b$ 数组选前若干个。
因为是选择前若干个，还可以用前缀和跑一下，记录 $sa_i=\sum_{j=1}^i a_j$，$sb_i=\sum_{j=1}^i b_j$，题意简化成，确定一个有序二元组 $(i,j)$，使得 $\min(sa_i&#43;sb_j)-(i&#43;j)$ 最大。
还有一点要注意的是因为允许不选择，所以答案一定不会小于 $0$。
不妨假设我们已经确定的二元组中 $i$ 取什么值，考虑求 $j$ 的范围。因为当 $j$ 较小的时候，$\min$ 函数会取到 $sb_j$，因为 $b_i\geqslant 1$，所以 $j$ 每减小 $1$，虽然代价减少了 $1$，但是少选的数的贡献不少于一，整体是不上升的。换句话说此时答案随 $j$ 减小而不升；当 $j$ 较大的时候，$\min$ 函数会取到 $sa_i$，此时 $sb_j$ 再大也无济于事，$j$ 增大只会让代价随之增大。换句话说此时答案随 $j$ 增大而增大。" />
    <meta name="generator" content="Hugo 0.91.2 with theme pure" />
    <title>2021全真模拟 - Arahc&#39;s blog</title>
    
    
    <link rel="stylesheet" href="http://walker68145.github.io/Arahc.github.io/css/style.min.e64d754037c0ee0ec4e20ab1d6f07740ace61729bc03850559b8caa21ae4a597.css">
    
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
    <meta property="og:title" content="2021全真模拟" />
<meta property="og:description" content="总结 考试策略 T1 $n^2$ 暴力显然，因为好写而且没有想到正解所以直接跳过。T2 因为题意一直在强调几个东西，把这些当做状态就切掉了。仔细阅读 T3 之后没有好想法，所以回到 T1，想到一种正解。写了三分查找，过了大样例后时间剩余不多，紧急回头写 T3 暴力与骗分。
结果反思 T1：期望得分 $100$，实际得分 $35$，三分查找挂掉了。代码实现能力需加强。
T2：期望得分 $100$，实际得分 $100$。
T3：期望得分 $5$，实际得分 $0$。没骗到分，题目不会属于个人能力问题。
题解 T1：斯  给定两个长度为 $n$ 的实数序列 $a,b$。对于任意一个序列的任意一个数，你都可以用 $1$ 的代价标记这个数。记 $a$ 序列标记的数之和为 $s_a$，$b$ 序列标记的数之和为 $s_b$。你的到的收益为 $\min(sa,sb)$ 减去花费的代价。求收益最大值。$n\leqslant 10^5,1\leqslant a_i,b_i\leqslant 10$。
 考虑到选择一个数的代价都是 $1$。那么对于属于同一序列的数，显然优先选择数值更大的。本题的重点就是显然不能全部选择，因为代价随选择个数线性增长，可能选到后面就有些入不敷出。因为一定优先选择最大的，所以不妨先给 $a,b$ 按大到小排个序，此时一个符合贪心策略的选择方案就是在 $a$ 数组选前若干个，$b$ 数组选前若干个。
因为是选择前若干个，还可以用前缀和跑一下，记录 $sa_i=\sum_{j=1}^i a_j$，$sb_i=\sum_{j=1}^i b_j$，题意简化成，确定一个有序二元组 $(i,j)$，使得 $\min(sa_i&#43;sb_j)-(i&#43;j)$ 最大。
还有一点要注意的是因为允许不选择，所以答案一定不会小于 $0$。
不妨假设我们已经确定的二元组中 $i$ 取什么值，考虑求 $j$ 的范围。因为当 $j$ 较小的时候，$\min$ 函数会取到 $sb_j$，因为 $b_i\geqslant 1$，所以 $j$ 每减小 $1$，虽然代价减少了 $1$，但是少选的数的贡献不少于一，整体是不上升的。换句话说此时答案随 $j$ 减小而不升；当 $j$ 较大的时候，$\min$ 函数会取到 $sa_i$，此时 $sb_j$ 再大也无济于事，$j$ 增大只会让代价随之增大。换句话说此时答案随 $j$ 增大而增大。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://walker68145.github.io/Arahc.github.io/posts/2021%E5%85%A8%E7%9C%9F%E6%A8%A1%E6%8B%9F/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-29T21:31:17+08:00" />
<meta property="article:modified_time" content="2021-08-29T21:31:17+08:00" />

<meta itemprop="name" content="2021全真模拟">
<meta itemprop="description" content="总结 考试策略 T1 $n^2$ 暴力显然，因为好写而且没有想到正解所以直接跳过。T2 因为题意一直在强调几个东西，把这些当做状态就切掉了。仔细阅读 T3 之后没有好想法，所以回到 T1，想到一种正解。写了三分查找，过了大样例后时间剩余不多，紧急回头写 T3 暴力与骗分。
结果反思 T1：期望得分 $100$，实际得分 $35$，三分查找挂掉了。代码实现能力需加强。
T2：期望得分 $100$，实际得分 $100$。
T3：期望得分 $5$，实际得分 $0$。没骗到分，题目不会属于个人能力问题。
题解 T1：斯  给定两个长度为 $n$ 的实数序列 $a,b$。对于任意一个序列的任意一个数，你都可以用 $1$ 的代价标记这个数。记 $a$ 序列标记的数之和为 $s_a$，$b$ 序列标记的数之和为 $s_b$。你的到的收益为 $\min(sa,sb)$ 减去花费的代价。求收益最大值。$n\leqslant 10^5,1\leqslant a_i,b_i\leqslant 10$。
 考虑到选择一个数的代价都是 $1$。那么对于属于同一序列的数，显然优先选择数值更大的。本题的重点就是显然不能全部选择，因为代价随选择个数线性增长，可能选到后面就有些入不敷出。因为一定优先选择最大的，所以不妨先给 $a,b$ 按大到小排个序，此时一个符合贪心策略的选择方案就是在 $a$ 数组选前若干个，$b$ 数组选前若干个。
因为是选择前若干个，还可以用前缀和跑一下，记录 $sa_i=\sum_{j=1}^i a_j$，$sb_i=\sum_{j=1}^i b_j$，题意简化成，确定一个有序二元组 $(i,j)$，使得 $\min(sa_i&#43;sb_j)-(i&#43;j)$ 最大。
还有一点要注意的是因为允许不选择，所以答案一定不会小于 $0$。
不妨假设我们已经确定的二元组中 $i$ 取什么值，考虑求 $j$ 的范围。因为当 $j$ 较小的时候，$\min$ 函数会取到 $sb_j$，因为 $b_i\geqslant 1$，所以 $j$ 每减小 $1$，虽然代价减少了 $1$，但是少选的数的贡献不少于一，整体是不上升的。换句话说此时答案随 $j$ 减小而不升；当 $j$ 较大的时候，$\min$ 函数会取到 $sa_i$，此时 $sb_j$ 再大也无济于事，$j$ 增大只会让代价随之增大。换句话说此时答案随 $j$ 增大而增大。"><meta itemprop="datePublished" content="2021-08-29T21:31:17+08:00" />
<meta itemprop="dateModified" content="2021-08-29T21:31:17+08:00" />
<meta itemprop="wordCount" content="596">
<meta itemprop="keywords" content="分治,动态规划,二分三分," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="2021全真模拟"/>
<meta name="twitter:description" content="总结 考试策略 T1 $n^2$ 暴力显然，因为好写而且没有想到正解所以直接跳过。T2 因为题意一直在强调几个东西，把这些当做状态就切掉了。仔细阅读 T3 之后没有好想法，所以回到 T1，想到一种正解。写了三分查找，过了大样例后时间剩余不多，紧急回头写 T3 暴力与骗分。
结果反思 T1：期望得分 $100$，实际得分 $35$，三分查找挂掉了。代码实现能力需加强。
T2：期望得分 $100$，实际得分 $100$。
T3：期望得分 $5$，实际得分 $0$。没骗到分，题目不会属于个人能力问题。
题解 T1：斯  给定两个长度为 $n$ 的实数序列 $a,b$。对于任意一个序列的任意一个数，你都可以用 $1$ 的代价标记这个数。记 $a$ 序列标记的数之和为 $s_a$，$b$ 序列标记的数之和为 $s_b$。你的到的收益为 $\min(sa,sb)$ 减去花费的代价。求收益最大值。$n\leqslant 10^5,1\leqslant a_i,b_i\leqslant 10$。
 考虑到选择一个数的代价都是 $1$。那么对于属于同一序列的数，显然优先选择数值更大的。本题的重点就是显然不能全部选择，因为代价随选择个数线性增长，可能选到后面就有些入不敷出。因为一定优先选择最大的，所以不妨先给 $a,b$ 按大到小排个序，此时一个符合贪心策略的选择方案就是在 $a$ 数组选前若干个，$b$ 数组选前若干个。
因为是选择前若干个，还可以用前缀和跑一下，记录 $sa_i=\sum_{j=1}^i a_j$，$sb_i=\sum_{j=1}^i b_j$，题意简化成，确定一个有序二元组 $(i,j)$，使得 $\min(sa_i&#43;sb_j)-(i&#43;j)$ 最大。
还有一点要注意的是因为允许不选择，所以答案一定不会小于 $0$。
不妨假设我们已经确定的二元组中 $i$ 取什么值，考虑求 $j$ 的范围。因为当 $j$ 较小的时候，$\min$ 函数会取到 $sb_j$，因为 $b_i\geqslant 1$，所以 $j$ 每减小 $1$，虽然代价减少了 $1$，但是少选的数的贡献不少于一，整体是不上升的。换句话说此时答案随 $j$ 减小而不升；当 $j$ 较大的时候，$\min$ 函数会取到 $sa_i$，此时 $sb_j$ 再大也无济于事，$j$ 增大只会让代价随之增大。换句话说此时答案随 $j$ 增大而增大。"/>

    <!--[if lte IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
      <![endif]-->

    <!--[if lt IE 9]>
        <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
      <![endif]-->
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/Walker_68145" target="_blank">
            <img class="img-circle img-rotate" src="http://walker68145.github.io/Arahc.github.io/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">Arahc</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">Arahc&#39;s home</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Changsha, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="Type something..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/Arahc.github.io/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/Arahc.github.io/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/Arahc.github.io/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/Arahc.github.io/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/Arahc.github.io/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>博客已经由 Walker_68145.github.io 转移到此处，原页面保留，为此带来的不便请大家谅解。</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> Tags</h3>
    <div id="tag-cloud-list" class="widget-body">
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/k%E8%BF%9B%E5%88%B6/" class="tag-list-link" rel="1">k进制<span
               class="tag-list-count">1</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/stl/" class="tag-list-link" rel="1">stl<span
               class="tag-list-count">1</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E4%BA%8C%E5%88%86%E4%B8%89%E5%88%86/" class="tag-list-link" rel="2">二分三分<span
               class="tag-list-count">2</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%88%86%E6%B2%BB/" class="tag-list-link" rel="3">分治<span
               class="tag-list-count">3</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="tag-list-link" rel="8">动态规划<span
               class="tag-list-count">8</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%9B%BE%E8%AE%BA/" class="tag-list-link" rel="7">图论<span
               class="tag-list-count">7</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="tag-list-link" rel="1">字符串<span
               class="tag-list-count">1</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E6%95%B0%E5%AD%A6/" class="tag-list-link" rel="10">数学<span
               class="tag-list-count">10</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="tag-list-link" rel="9">数据结构<span
               class="tag-list-count">9</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E6%9A%B4%E5%8A%9B/" class="tag-list-link" rel="4">暴力<span
               class="tag-list-count">4</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E8%8E%AB%E9%98%9F/" class="tag-list-link" rel="1">莫队<span
               class="tag-list-count">1</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E8%B4%AA%E5%BF%83/" class="tag-list-link" rel="3">贪心<span
               class="tag-list-count">3</span></a>
            
            
            <a href="http://walker68145.github.io/Arahc.github.io/tags/%E9%9A%8F%E6%9C%BA%E5%8C%96/" class="tag-list-link" rel="2">随机化<span
               class="tag-list-count">2</span></a>
            
    </div>
<script>
document.onreadystatechange = () => {
  if (document.readyState === 'complete') {
    tagCloud('#tag-cloud-list a',  8 ,  20 );
  }
};

function tagCloud(where, min, max) {
  let iMax = 0;
  let iMin = 0;
  $(where).each(function() {
    let weight = Number($(this).attr("rel"));
    if(iMax < weight) iMax = weight;
    if(iMin > weight || iMin == 0) iMin = weight;
  });
  let step = (max - min)/(iMax - iMin);
  $(where).each(function() {
    let weight = $(this).attr("rel") - iMin;
    $(this).css({"font-size": min + (weight * step) + 'px'});
  });
};
</script>
</div>

      <div class="widget">
    <h3 class="widget-title"> Categories</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="http://walker68145.github.io/Arahc.github.io/categories/%E6%9D%82%E9%A1%B9/" class="category-list-link">杂项</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="http://walker68145.github.io/Arahc.github.io/categories/%E7%AC%94%E8%AE%B0/" class="category-list-link">笔记</a><span class="category-list-count">11</span></li>
            <li class="category-list-item"><a href="http://walker68145.github.io/Arahc.github.io/categories/%E9%A2%98%E8%A7%A3/" class="category-list-link">题解</a><span class="category-list-count">20</span></li>
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> Tags</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/k%E8%BF%9B%E5%88%B6/" class="tag-list-link">k进制</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/stl/" class="tag-list-link">stl</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E4%BA%8C%E5%88%86%E4%B8%89%E5%88%86/" class="tag-list-link">二分三分</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%88%86%E6%B2%BB/" class="tag-list-link">分治</a><span
                    class="tag-list-count">3</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="tag-list-link">动态规划</a><span
                    class="tag-list-count">8</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%9B%BE%E8%AE%BA/" class="tag-list-link">图论</a><span
                    class="tag-list-count">7</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="tag-list-link">字符串</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E6%95%B0%E5%AD%A6/" class="tag-list-link">数学</a><span
                    class="tag-list-count">10</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="tag-list-link">数据结构</a><span
                    class="tag-list-count">9</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E6%9A%B4%E5%8A%9B/" class="tag-list-link">暴力</a><span
                    class="tag-list-count">4</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E8%8E%AB%E9%98%9F/" class="tag-list-link">莫队</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E8%B4%AA%E5%BF%83/" class="tag-list-link">贪心</a><span
                    class="tag-list-count">3</span></li>
            
            
            <li class="tag-list-item"><a href="http://walker68145.github.io/Arahc.github.io/tags/%E9%9A%8F%E6%9C%BA%E5%8C%96/" class="tag-list-link">随机化</a><span
                    class="tag-list-count">2</span></li>
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://walker68145.github.io/Arahc.github.io/posts/p5633%E6%9C%80%E5%B0%8F%E5%BA%A6%E9%99%90%E5%88%B6%E7%94%9F%E6%88%90%E6%A0%91-%E9%A2%98%E8%A7%A3/" class="title">P5633最小度限制生成树 题解</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-12-28 21:43:22 &#43;0800 CST" itemprop="datePublished">2021-12-28</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://walker68145.github.io/Arahc.github.io/posts/%E7%BA%BF%E6%80%A7%E5%9F%BA%E5%85%A5%E9%97%A8/" class="title">线性基入门</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-12-22 21:47:24 &#43;0800 CST" itemprop="datePublished">2021-12-22</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://walker68145.github.io/Arahc.github.io/posts/markdown-%E5%85%A5%E9%97%A8/" class="title">Markdown 入门</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-11-30 18:41:00 &#43;0800 CST" itemprop="datePublished">2021-11-30</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://walker68145.github.io/Arahc.github.io/posts/oi-%E7%9B%B8%E5%85%B3%E7%9A%84%E9%9D%9E%E5%88%87%E9%A2%98%E5%86%85%E5%AE%B9/" class="title">OI 相关的非切题内容</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-11-28 21:42:04 &#43;0800 CST" itemprop="datePublished">2021-11-28</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://walker68145.github.io/Arahc.github.io/posts/%E6%9B%BF%E7%BD%AA%E7%BE%8A%E4%B8%8Ekdtree/" class="title">替罪羊与KDTree</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-11-25 21:48:19 &#43;0800 CST" itemprop="datePublished">2021-11-25</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">Catalogue</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/Arahc.github.io/posts/2021%E5%85%A8%E7%9C%9F%E6%A8%A1%E6%8B%9F/"
    >2021全真模拟</a
  >
</h1>

      <div class="article-meta">
        
<span class="article-date">
  <i class="icon icon-calendar-check"></i>&nbsp;
<a href="http://walker68145.github.io/Arahc.github.io/posts/2021%E5%85%A8%E7%9C%9F%E6%A8%A1%E6%8B%9F/" class="article-date">
  <time datetime="2021-08-29 21:31:17 &#43;0800 CST" itemprop="datePublished">2021-08-29</time>
</a>
</span>
<span class="article-category">
  <i class="icon icon-folder"></i>&nbsp;
  <a class="article-category-link" href="/Arahc.github.io/categories/%E9%A2%98%E8%A7%A3/"> 题解 </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>&nbsp;
    <a class="article-tag-link" href="/Arahc.github.io/tags/%E5%88%86%E6%B2%BB/"> 分治 </a>
    <a class="article-tag-link" href="/Arahc.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"> 动态规划 </a>
    <a class="article-tag-link" href="/Arahc.github.io/tags/%E4%BA%8C%E5%88%86%E4%B8%89%E5%88%86/"> 二分三分 </a>
  </span>

		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 596 words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Time: 3 minutes </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h2 id="总结">总结</h2>
<h3 id="考试策略">考试策略</h3>
<p>T1 $n^2$ 暴力显然，因为好写而且没有想到正解所以直接跳过。T2 因为题意一直在强调几个东西，把这些当做状态就切掉了。仔细阅读 T3 之后没有好想法，所以回到 T1，想到一种正解。写了三分查找，过了大样例后时间剩余不多，紧急回头写 T3 暴力与骗分。</p>
<h3 id="结果反思">结果反思</h3>
<p>T1：期望得分 $100$，实际得分 $35$，三分查找挂掉了。代码实现能力需加强。</p>
<p>T2：期望得分 $100$，实际得分 $100$。</p>
<p>T3：期望得分 $5$，实际得分 $0$。没骗到分，题目不会属于个人能力问题。</p>
<h2 id="题解">题解</h2>
<h3 id="t1斯">T1：斯</h3>
<blockquote>
<p>给定两个长度为 $n$ 的实数序列 $a,b$。对于任意一个序列的任意一个数，你都可以用 $1$ 的代价标记这个数。记 $a$ 序列标记的数之和为 $s_a$，$b$ 序列标记的数之和为 $s_b$。你的到的收益为 $\min(sa,sb)$ 减去花费的代价。求收益最大值。$n\leqslant 10^5,1\leqslant a_i,b_i\leqslant 10$。</p>
</blockquote>
<p>考虑到选择一个数的代价都是 $1$。那么对于属于同一序列的数，显然优先选择数值更大的。本题的重点就是显然不能全部选择，因为代价随选择个数线性增长，可能选到后面就有些入不敷出。因为一定优先选择最大的，所以不妨先给 $a,b$ 按大到小排个序，此时一个符合贪心策略的选择方案就是在 $a$ 数组选前若干个，$b$ 数组选前若干个。</p>
<p>因为是选择前若干个，还可以用前缀和跑一下，记录 $sa_i=\sum_{j=1}^i a_j$，$sb_i=\sum_{j=1}^i b_j$，题意简化成，确定一个有序二元组 $(i,j)$，使得 $\min(sa_i+sb_j)-(i+j)$ 最大。</p>
<p>还有一点要注意的是因为允许不选择，所以答案一定不会小于 $0$。</p>
<p>不妨假设我们已经确定的二元组中 $i$ 取什么值，考虑求 $j$ 的范围。因为当 $j$ 较小的时候，$\min$ 函数会取到 $sb_j$，因为 $b_i\geqslant 1$，所以 $j$ 每减小 $1$，虽然代价减少了 $1$，但是少选的数的贡献不少于一，整体是不上升的。换句话说此时答案随 $j$ 减小而不升；当 $j$ 较大的时候，$\min$ 函数会取到 $sa_i$，此时 $sb_j$ 再大也无济于事，$j$ 增大只会让代价随之增大。换句话说此时答案随 $j$ 增大而增大。</p>
<p>整体上看，$i$ 固定时，前一部分答案随 $j$ 减小而不上升，后一部分答案随 $j$ 增大而减小。$j$ 和答案的关系是一个不严格的 <strong>单峰函数</strong>。管他严不严格，只要是单峰函数，三分查找都可以解决。</p>
<p>这里的三分查找也不是什么很严格的三分查找，不是每次将序列缩短为原来的三分之一，而是缩短三分之一，具体情况如下：我们三分一个 $lmid$ 和 $rmid$，考虑其在单峰函数上可能的关系即可。</p>
<hr>
<p><strong>三分查找单峰函数峰值</strong></p>
<p>假设我们的单峰函数长这样：</p>
<p><img src="https://pic.imgdb.cn/item/612b2dbe44eaada739e532f7.png" alt="单峰函数"></p>
<p><del>我才不会告诉你这就是一个二次函数和一次函数拼起来得到的</del></p>
<p>对于 $lmid&lt;rmid$ 的情况，有两种可能：</p>
<ul>
<li>二者在同侧：</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/612b2fba44eaada739e97b04.png" alt="l<r 同侧"></p>
<ul>
<li>二者在异侧：</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/612b31b544eaada739edb5de.png" alt="l<r 异侧"></p>
<p>不难发现这两种情况都直接将左端点移动到 $lmid$ 的位置即可。</p>
<p>对于 $lmid&gt;rmid$ 的情况，也有两种可能：</p>
<ul>
<li>二者在同侧：</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/612b31ed44eaada739ee2e14.png" alt="l>r 同侧"></p>
<ul>
<li>二者在异侧：</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/612b322044eaada739ee90c1.png" alt="l>r 异侧"></p>
<p>不难发现这两种情况都直接将右端点移动到 $rmid$ 的位置即可。</p>
<hr>
<p>现在对于某一个 $i$，我们可以通过三分查找得到 $j$，从而算出这个情况下的最优答案。这样的不严格三分（其实也是三分）的复杂度是 $\log_{1.5} n$ 的。（因为考虑到每次把原区间缩短为原来的三分之二，所以 $\log$ 的底数是三分之二的倒数，也就是 $1.5$）</p>
<p>显然 $i$ 直接枚举即可。总的复杂度是 $\operatorname{O}(n\log_{1.5} n)$。</p>
<p>代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> max_n<span style="color:#f92672">=</span><span style="color:#ae81ff">100005</span>;

<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">cmp</span>(<span style="color:#66d9ef">double</span> a,<span style="color:#66d9ef">double</span> b){ <span style="color:#75715e">// 大到小排序
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> a<span style="color:#f92672">&gt;</span>b;
}

<span style="color:#66d9ef">int</span> n;
<span style="color:#66d9ef">double</span> a[max_n<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>],s1[max_n],s2[max_n],ans;
<span style="color:#75715e">// 原题题不是 a,b 数组，是 a 数组的 1-n 和 n+1-2n 两个部分
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">double</span> <span style="color:#a6e22e">ck</span>(<span style="color:#66d9ef">int</span> k,<span style="color:#66d9ef">int</span> p){ <span style="color:#75715e">// 求 i=p,j=k 时的答案
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> min(s1[p],s2[k<span style="color:#f92672">-</span>n])<span style="color:#f92672">-</span><span style="color:#ae81ff">1.0</span><span style="color:#f92672">*</span>(k<span style="color:#f92672">-</span>n<span style="color:#f92672">+</span>p);
}

<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">sf</span>(<span style="color:#66d9ef">int</span> l,<span style="color:#66d9ef">int</span> r,<span style="color:#66d9ef">int</span> p){
	<span style="color:#66d9ef">while</span>(l<span style="color:#f92672">&lt;=</span>r){
		<span style="color:#66d9ef">int</span> ml<span style="color:#f92672">=</span>l<span style="color:#f92672">+</span>(r<span style="color:#f92672">-</span>l)<span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>,mr<span style="color:#f92672">=</span>ml<span style="color:#f92672">+</span>(r<span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>; <span style="color:#75715e">// 注意细节
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span>(ck(ml,p)<span style="color:#f92672">&lt;</span>ck(mr,p)) l<span style="color:#f92672">=</span>ml<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>; <span style="color:#75715e">// lmid贡献&lt;rmid
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">else</span> r<span style="color:#f92672">=</span>mr<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>; <span style="color:#75715e">// 反之
</span><span style="color:#75715e"></span>	}
	<span style="color:#66d9ef">return</span> l;
}

<span style="color:#66d9ef">signed</span> <span style="color:#a6e22e">main</span>(){
	ios<span style="color:#f92672">::</span>sync_with_stdio(false);
	cin.tie(<span style="color:#ae81ff">0</span>);
	cin<span style="color:#f92672">&gt;&gt;</span>n;
	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>;<span style="color:#f92672">++</span>i)
		cin<span style="color:#f92672">&gt;&gt;</span>a[i];
	sort(a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">+</span>n,cmp),
	sort(a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">+</span>n,a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">+</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>n,cmp); <span style="color:#75715e">// 分别大到小排序
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;<span style="color:#f92672">++</span>i)
		s1[i]<span style="color:#f92672">=</span>s1[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>a[i]; <span style="color:#75715e">// 前缀和，题解里的 sa
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span>n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>;<span style="color:#f92672">++</span>i)
		s2[i<span style="color:#f92672">-</span>n]<span style="color:#f92672">=</span>s2[i<span style="color:#f92672">-</span>n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>a[i]; <span style="color:#75715e">// 题解里的 sb
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;<span style="color:#f92672">++</span>i){
		<span style="color:#66d9ef">int</span> p<span style="color:#f92672">=</span>sf(n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>n,i); <span style="color:#75715e">// 枚举 i，三分 j，更新答案
</span><span style="color:#75715e"></span>		ans<span style="color:#f92672">=</span>max(ans,min(s1[i],s2[p<span style="color:#f92672">-</span>n])<span style="color:#f92672">-</span><span style="color:#ae81ff">1.0</span><span style="color:#f92672">*</span>(p<span style="color:#f92672">-</span>n<span style="color:#f92672">+</span>i));
	}
	printf(<span style="color:#e6db74">&#34;%.4lf&#34;</span>,ans);
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h3 id="t2给">T2：给</h3>
<blockquote>
<p>求有多少个区分左右儿子我的二叉树，恰好有 $k$ 个叶子节点，且每个节点要么没有儿子，要么有两个儿子，同时不存在任意一个节点，使得从这个节点到根的路径上有不少于 $m$ 条向左的边。对于每一个 $1\leqslant k\leqslant m$，都要计算答案。$n,m\leqslant 5\times 10^3$。</p>
</blockquote>
<p>题目提到的两个关键元素，一个是“叶子数”，另一个是“向左走的路径数”。而数据范围刚好可以进行平方级别的 DP，不妨把这个当成状态一试。确切地说，边模拟一个建树的过程边 DP，设 $f_{i,j}$ 表示现在的树有 $i$ 个叶子，且当前考虑的节点到根节点有 $j$ 条向左的边。</p>
<p>假设模拟建树的过程，对于某一棵树，$1$ 号节点的左子树已经全部考虑完，现在考虑建完 $9$ 号点，考虑 $10$ 号点建在哪里：</p>
<p><img src="https://pic.imgdb.cn/item/612b414f44eaada73910e2ca.png" alt="演示的树"></p>
<p>有两种转移：</p>
<ul>
<li>在 $9$ 号点下面直接新建 $10$ 号点，因为每个节点要么没有儿子要么两个儿子都要有，不妨先考虑建一个右儿子，因为右儿子到父亲的路径是向左走的好像一些（建左儿子的情况会在第二个转移提到），叶子数没有发生改变，但是 $10$ 号点到根的路径上左走边比 $9$ 号点多 $1$。因此可以转移到 $f_{i,j+1}$。</li>
<li>在没有补齐儿子也不是叶子的 $6$ 号点下面加 $10$ 号点，此时建了一个左儿子。叶子数增加 $1$，但是 $10$ 号点到根的的路径上左走边比 $9$ 号点少 $1$。因此可以转移到 $f_{i+1,j-1}$。</li>
</ul>
<p>于是有 DP 转移：</p>
<p>$$f_{i,j}\leftarrow f_{i,j}+f_{i,j-1}+f_{i-1,j+1}$$</p>
<p>注意 $f_{i,j-1}$，当 $j\leqslant 0$ 时这个状态是无效的，当做 $0$ 处理。</p>
<p>这时可能会有疑问：$9$ 号点的左儿子怎么处理？在建立了 $9$ 的右儿子 $10$ 后，我们一定要保证最后的答案状态下 $9$ 号点（代指所有没有左儿子的非叶子节点）的左儿子都要有。换句话说，到底哪些状态才是答案状态？</p>
<p>考虑到第二种转移是在补齐没有左儿子的点的左儿子，当 $j=0$ 时，说明此时这个点到根的路径上没有左走。因此只有可能是当前考虑的节点是根节点或根节点的若干重左儿子。注意到第二个转移是“补齐”了没有左儿子的点，说明这个点在进行第二个转移时说明它原本已经有一个右儿子了，转移的时候让它两个儿子都有了。于是 $j=0$ 的情况说明这个树已经合法了（为什么只要根和根的几重左儿子有右儿子就合法？因为 $j=0$ 的情况一定是由第二种转移得到的，说明其他点已经补齐了）。</p>
<p>因此答案就是 $f_{k,0}$。代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#define int long long
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> max_n<span style="color:#f92672">=</span><span style="color:#ae81ff">5003</span>,mod<span style="color:#f92672">=</span><span style="color:#ae81ff">998244353</span>;
<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">read</span>(){
	<span style="color:#66d9ef">int</span> x<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#66d9ef">bool</span> w<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#66d9ef">char</span> c<span style="color:#f92672">=</span>getchar();
	<span style="color:#66d9ef">while</span>(c<span style="color:#f92672">&lt;</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">||</span> c<span style="color:#f92672">&gt;</span><span style="color:#e6db74">&#39;9&#39;</span>) w<span style="color:#f92672">|=</span>c<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;-&#39;</span>,c<span style="color:#f92672">=</span>getchar();
	<span style="color:#66d9ef">while</span>(c<span style="color:#f92672">&gt;=</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&amp;&amp;</span> c<span style="color:#f92672">&lt;=</span><span style="color:#e6db74">&#39;9&#39;</span>) x<span style="color:#f92672">=</span>(x<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">+</span>(x<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">3</span>)<span style="color:#f92672">+</span>(c<span style="color:#f92672">^</span><span style="color:#ae81ff">48</span>),c<span style="color:#f92672">=</span>getchar();
	<span style="color:#66d9ef">return</span> w<span style="color:#f92672">?-</span>x:x;
}
<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">write</span>(<span style="color:#66d9ef">int</span> x){
	<span style="color:#66d9ef">if</span>(x<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span>) x<span style="color:#f92672">=-</span>x,putchar(<span style="color:#e6db74">&#39;-&#39;</span>);
	<span style="color:#66d9ef">if</span>(x<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">9</span>) write(x<span style="color:#f92672">/</span><span style="color:#ae81ff">10</span>);
	putchar(x<span style="color:#f92672">%</span><span style="color:#ae81ff">10</span><span style="color:#f92672">^</span><span style="color:#ae81ff">48</span>);
}

<span style="color:#66d9ef">int</span> n,m,f[max_n][max_n]; <span style="color:#75715e">// DP 数组
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">signed</span> <span style="color:#a6e22e">main</span>(){
	m<span style="color:#f92672">=</span>read(),n<span style="color:#f92672">=</span>read(),f[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>; <span style="color:#75715e">// 初始化，该状态表示只有一个节点
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;<span style="color:#f92672">++</span>i) <span style="color:#75715e">// 一棵树不可能是 0 叶子，从 1 开始循环
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;j<span style="color:#f92672">&lt;</span>m;<span style="color:#f92672">++</span>j){ <span style="color:#75715e">// j=0 是答案状态，不能漏掉，从 0 开始循环
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">if</span>(j<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>){
				f[i][j]<span style="color:#f92672">+=</span>f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>],
				f[i][j]<span style="color:#f92672">%=</span>mod;
			}
			f[i][j]<span style="color:#f92672">+=</span>f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>],
			f[i][j]<span style="color:#f92672">%=</span>mod;
		} <span style="color:#75715e">// 转移
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;<span style="color:#f92672">++</span>i)
		write(f[i][<span style="color:#ae81ff">0</span>]),putchar(<span style="color:#e6db74">&#39;\n&#39;</span>);
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h3 id="t3普">T3：普</h3>
<blockquote>
<p>给定一个长度为 $n$ 的序列 $a$。定义一个序列的权值是该序列第奇数项的数之和减去第偶数项的数之和（从 $1$ 编号）。求 $a$ 中所有长度为 $k$ 的子序列中的最大权值。对于所有 $1\leqslant k\leqslant n$，都要求其答案。$n\leqslant 10^5$。</p>
</blockquote>
<p>这里有一个重要的结论：设 $c_i$ 为 $k=i$ 的一个答案对应的子序列，那么一定存在一种情况，满足 $c_i$ 是 $c_{i+2}$ 的子集。这个结论证明非常不好证，有意愿的可以自行分类讨论证明。（<del>我才不会告诉你是我不会证</del>）</p>
<p>此时可以考虑用 CDQ 分治处理这个题目。设 $f_{i,t,l}$ 表示 CDQ 分治递归到了第 $i$ 层，此时 CDQ 分治的左端点为 $L$，以 $L$ 为起点 $l$ 为终点的最优答案。其中 $t=1$ 表示第奇数个的系数为 $-1$，第偶数个的系数为 $1$；$t=0$ 表示第奇数个的系数为 $1$，第偶数个的系数为 $-1$。</p>
<p>每次转移的时候，因为一个点在 $CDQ$ 一层内最多只会属于一段区间，且一定会属于一段区间。这段区间往下递归的时候左端点是固定的。因此分层转移时，在区间范围内找出若干个数字（设为 $x$），并转移到 $f_{i+1,t,x}$ 处。具体地说，应该在 $[l-2,mid]$ 和 $[mid+1,r+2]$ 这两段区间里面找数字填进去。为什么是 $l-2,r+2$ 而不是 $l,r$，因为有可能选出来的数字在目前子序列第一个数左边，或最后一个数右边。</p>
<p>代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#define int long long
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> max_n<span style="color:#f92672">=</span><span style="color:#ae81ff">500005</span>,inf<span style="color:#f92672">=</span><span style="color:#ae81ff">10000000000000000LL</span>;
<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">read</span>(){
	<span style="color:#66d9ef">int</span> x<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#66d9ef">bool</span> w<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#66d9ef">char</span> c<span style="color:#f92672">=</span>getchar();
	<span style="color:#66d9ef">while</span>(c<span style="color:#f92672">&lt;</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">||</span> c<span style="color:#f92672">&gt;</span><span style="color:#e6db74">&#39;9&#39;</span>) w<span style="color:#f92672">|=</span>c<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;-&#39;</span>,c<span style="color:#f92672">=</span>getchar();
	<span style="color:#66d9ef">while</span>(c<span style="color:#f92672">&gt;=</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&amp;&amp;</span> c<span style="color:#f92672">&lt;=</span><span style="color:#e6db74">&#39;9&#39;</span>) x<span style="color:#f92672">=</span>(x<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">+</span>(x<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">3</span>)<span style="color:#f92672">+</span>(c<span style="color:#f92672">^</span><span style="color:#ae81ff">48</span>),c<span style="color:#f92672">=</span>getchar();
	<span style="color:#66d9ef">return</span> w<span style="color:#f92672">?-</span>x:x;
}
<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">write</span>(<span style="color:#66d9ef">int</span> x){
	<span style="color:#66d9ef">if</span>(x<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span>) x<span style="color:#f92672">=-</span>x,putchar(<span style="color:#e6db74">&#39;-&#39;</span>);
	<span style="color:#66d9ef">if</span>(x<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">9</span>) write(x<span style="color:#f92672">/</span><span style="color:#ae81ff">10</span>);
	putchar(x<span style="color:#f92672">%</span><span style="color:#ae81ff">10</span><span style="color:#f92672">^</span><span style="color:#ae81ff">48</span>);
}

<span style="color:#66d9ef">int</span> n,a[max_n];
<span style="color:#66d9ef">int</span> f[<span style="color:#ae81ff">20</span>][<span style="color:#ae81ff">3</span>][max_n];

<span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">cdq</span>(<span style="color:#66d9ef">int</span> x,<span style="color:#66d9ef">int</span> l,<span style="color:#66d9ef">int</span> r){ <span style="color:#75715e">// cdq 分治
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span>(l<span style="color:#f92672">==</span>r){ <span style="color:#75715e">// 边界
</span><span style="color:#75715e"></span>		f[x][<span style="color:#ae81ff">0</span>][l]<span style="color:#f92672">=</span>a[l],
		f[x][<span style="color:#ae81ff">1</span>][l]<span style="color:#f92672">=-</span>a[l];
		<span style="color:#66d9ef">return</span>;
	}
	<span style="color:#66d9ef">int</span> mid<span style="color:#f92672">=</span>(l<span style="color:#f92672">+</span>r)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>,L<span style="color:#f92672">=</span>mid<span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,R<span style="color:#f92672">=</span>r<span style="color:#f92672">-</span>mid;
	cdq(x<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,l,mid),
	cdq(x<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,r);

	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;i<span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">1</span>;<span style="color:#f92672">++</span>i){ <span style="color:#75715e">// 这里的 i 其实是题解的 t
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">int</span> l2<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,r2<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
		<span style="color:#66d9ef">while</span> (l2<span style="color:#f92672">&lt;</span>L <span style="color:#f92672">||</span> r2<span style="color:#f92672">&lt;</span>R){
			<span style="color:#66d9ef">int</span> jl,jr,mx<span style="color:#f92672">=-</span>inf,dn<span style="color:#f92672">=</span>max(<span style="color:#ae81ff">0LL</span>,l2<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>),up<span style="color:#f92672">=</span>min(L,l2<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>);
			<span style="color:#75715e">// 这里要是没有取max和min就可能会从不合法下标开始找
</span><span style="color:#75715e"></span>
			<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span>dn;j<span style="color:#f92672">&lt;=</span>up;<span style="color:#f92672">++</span>j){
				<span style="color:#66d9ef">int</span> k<span style="color:#f92672">=</span>l2<span style="color:#f92672">+</span>r2<span style="color:#f92672">-</span>j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>; <span style="color:#75715e">// 确定下标
</span><span style="color:#75715e"></span>				<span style="color:#66d9ef">if</span>(k<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> k<span style="color:#f92672">&gt;</span>R) <span style="color:#66d9ef">continue</span>; <span style="color:#75715e">// 不合法
</span><span style="color:#75715e"></span>				<span style="color:#66d9ef">int</span> res<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
				<span style="color:#66d9ef">if</span>(j) res<span style="color:#f92672">+=</span>f[x<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][i][l<span style="color:#f92672">+</span>j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
				<span style="color:#66d9ef">if</span>(k) res<span style="color:#f92672">+=</span>f[x<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][(j<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">^</span>i][mid<span style="color:#f92672">+</span>k]; <span style="color:#75715e">// 转移
</span><span style="color:#75715e"></span>				<span style="color:#66d9ef">if</span>(res<span style="color:#f92672">&gt;</span>mx){ <span style="color:#75715e">// 更新最优转移的答案
</span><span style="color:#75715e"></span>					mx<span style="color:#f92672">=</span>res,
					jl<span style="color:#f92672">=</span>j,
					jr<span style="color:#f92672">=</span>k;
				}
			}
			l2<span style="color:#f92672">=</span>jl,r2<span style="color:#f92672">=</span>jr;
			f[x][i][l<span style="color:#f92672">+</span>jl<span style="color:#f92672">+</span>jr<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>mx;
		}
	}
}

<span style="color:#66d9ef">signed</span> <span style="color:#a6e22e">main</span>(){
	n<span style="color:#f92672">=</span>read();
	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;<span style="color:#f92672">++</span>i)
		a[i]<span style="color:#f92672">=</span>read();
	cdq(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>,n);
	<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">register</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;<span style="color:#f92672">++</span>i)
		write(f[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>][i]),putchar(<span style="color:#e6db74">&#39; &#39;</span>);
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>总的复杂度在 CDQ 上，是 $\operatorname{O}(n\log n)$ 的。</p>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>Permalink: </strong>
      <a href="http://walker68145.github.io/Arahc.github.io/posts/2021%E5%85%A8%E7%9C%9F%E6%A8%A1%E6%8B%9F/" title="2021全真模拟" target="_blank" rel="external">http://walker68145.github.io/Arahc.github.io/posts/2021%E5%85%A8%E7%9C%9F%E6%A8%A1%E6%8B%9F/</a>
    </li>
    <li class="post-copyright-license">
      <strong>License: </strong>
        <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external"></a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/Walker_68145" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="http://walker68145.github.io/Arahc.github.io/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/Walker_68145" target="_blank"><span class="text-dark">Arahc</span><small class="ml-1x">Arahc&#39;s home</small></a></h3>
        <div>咕↘咕↗咕——→</div>
      </div>
    </figure>
  </div>
</div>

    </div>
  </article>
</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="http://walker68145.github.io/Arahc.github.io/posts/lcp-%E5%92%8C%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/" title="LCP 和后缀数组"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;Older</span></a>
            </li>
            <li class="next">
                <a href="http://walker68145.github.io/Arahc.github.io/posts/latex-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/"
                    title="LaTeX 数学公式"><span>Newer&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="Catalogue" role="button">
                    <span>[&nbsp;</span><span>Catalogue</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>


</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/Walker_68145" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="http://walker68145.github.io/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2017  -
    2021
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
    
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/C&#43;&#43;.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="http://walker68145.github.io/Arahc.github.io/js/application.min.a94ab19cb63a95c8d7fbd7b85cab3ddeea8c369bdf75b9cab6708787ead123af.js"></script>
<script src="http://walker68145.github.io/Arahc.github.io/js/plugin.min.19c5bcb2fb0789ab4f2b7834e5ceb5e92635645605bab902c1024b25f1502364.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            ROOT_URL: 'http:\/\/walker68145.github.io\/Arahc.github.io',
            CONTENT_URL: 'http:\/\/walker68145.github.io\/Arahc.github.io\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="http://walker68145.github.io/Arahc.github.io/js/insight.min.4a2d52de4bfff73e0c688404fe3d17c9a3ae12d9888e1e1ac9c690e4890de2ded50fe55f2b819c2ba55435a76f396f3ea6805765f0b0af5635cdf74ea459eab0.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>


  </body>
</html>
